//var po = org.polymaps;

//var map = po.map()
    //.container(document.getElementById("map").appendChild(po.svg("svg")))
    map.zoom(3)
    .zoomRange([3, 13]);
map.on("move", update2)

var testData = JSON.parse('{"centers": [{"x": 37.787, "y": -122.228, "r": 37.60}]}')
//var rawData1 = {"clusters": [testData, testData, testData, testData, testData, testData, testData, testData, testData, testData]};
var rawData1 = JSON.parse('{"clusters": [{"centers": [{"x": 44.22499999999999,"y": -118.9, "r": 46.07137452349959, "d": 9.0},{"x": 46.774999999999984,"y": -123.1, "r": 48.62137452349959, "d": 100.0},{"x": 44.22499999999999,"y": -123.1, "r": 46.07137452349959, "d": 100.0},{"x": 21.275,"y": -102.1, "r": 23.121374523499604, "d": 100.0},{"x": 31.475,"y": -97.89999999999998, "r": 33.32137452349961, "d": 100.0},{"x": 39.12499999999999,"y": -102.1, "r": 40.9713745234996, "d": 56.0},{"x": 49.32499999999998,"y": -85.29999999999998, "r": 51.17137452349959, "d": 100.0},{"x": 49.32499999999998,"y": -118.9, "r": 51.17137452349959, "d": 20.0},{"x": 41.67499999999999,"y": -102.1, "r": 43.521374523499595, "d": 9.0},{"x": 31.475,"y": -93.69999999999999, "r": 33.32137452349961, "d": 99.0},{"x": 36.574999999999996,"y": -85.29999999999998, "r": 38.4213745234996, "d": 99.0},{"x": 36.574999999999996,"y": -102.1, "r": 38.4213745234996, "d": 13.0},{"x": 31.475,"y": -85.29999999999998, "r": 33.32137452349961, "d": 97.0},{"x": 49.32499999999998,"y": -97.89999999999998, "r": 51.17137452349959, "d": 100.0},{"x": 44.22499999999999,"y": -97.89999999999998, "r": 46.07137452349959, "d": 100.0},{"x": 49.32499999999998,"y": -123.1, "r": 51.17137452349959, "d": 100.0},{"x": 46.774999999999984,"y": -93.69999999999999, "r": 48.62137452349959, "d": 100.0},{"x": 46.774999999999984,"y": -97.89999999999998, "r": 48.62137452349959, "d": 100.0},{"x": 26.375,"y": -97.89999999999998, "r": 28.221374523499605, "d": 100.0},{"x": 34.025,"y": -110.5, "r": 35.871374523499604, "d": 100.0},{"x": 36.574999999999996,"y": -114.69999999999999, "r": 38.4213745234996, "d": 99.0},{"x": 49.32499999999998,"y": -110.5, "r": 51.17137452349959, "d": 100.0},{"x": 39.12499999999999,"y": -118.9, "r": 40.9713745234996, "d": 100.0},{"x": 28.925000000000004,"y": -106.29999999999998, "r": 30.77137452349961, "d": 11.0},{"x": 39.12499999999999,"y": -93.69999999999999, "r": 40.9713745234996, "d": 99.0},{"x": 31.475,"y": -81.09999999999997, "r": 33.32137452349961, "d": 100.0},{"x": 41.67499999999999,"y": -123.1, "r": 43.521374523499595, "d": 33.0},{"x": 34.025,"y": -97.89999999999998, "r": 35.871374523499604, "d": 100.0},{"x": 34.025,"y": -123.1, "r": 35.871374523499604, "d": 19.0},{"x": 41.67499999999999,"y": -93.69999999999999, "r": 43.521374523499595, "d": 100.0},{"x": 23.825000000000003,"y": -81.09999999999997, "r": 25.67137452349961, "d": 100.0},{"x": 21.275,"y": -85.29999999999998, "r": 23.121374523499604, "d": 100.0},{"x": 36.574999999999996,"y": -81.09999999999997, "r": 38.4213745234996, "d": 100.0},{"x": 36.574999999999996,"y": -118.9, "r": 38.4213745234996, "d": 100.0},{"x": 41.67499999999999,"y": -85.29999999999998, "r": 43.521374523499595, "d": 100.0},{"x": 34.025,"y": -81.09999999999997, "r": 35.871374523499604, "d": 100.0},{"x": 34.025,"y": -102.1, "r": 35.871374523499604, "d": 100.0},{"x": 28.925000000000004,"y": -102.1, "r": 30.77137452349961, "d": 100.0},{"x": 39.12499999999999,"y": -114.69999999999999, "r": 40.9713745234996, "d": 38.0},{"x": 49.32499999999998,"y": -102.1, "r": 51.17137452349959, "d": 7.0},{"x": 44.22499999999999,"y": -114.69999999999999, "r": 46.07137452349959, "d": 34.0},{"x": 41.67499999999999,"y": -81.09999999999997, "r": 43.521374523499595, "d": 101.0},{"x": 23.825000000000003,"y": -106.29999999999998, "r": 25.67137452349961, "d": 25.0}]}, {"centers": [{"x": 46.774999999999984,"y": -91.59999999999998, "r": 49.386167892353285, "d": 50.0},{"x": 44.22499999999999,"y": -95.79999999999998, "r": 46.83616789235329, "d": 50.0},{"x": 35.3,"y": -102.1, "r": 37.9111678923533, "d": 56.5},{"x": 21.275,"y": -83.19999999999997, "r": 23.886167892353303, "d": 50.0},{"x": 41.67499999999999,"y": -83.19999999999997, "r": 44.28616789235329, "d": 100.5},{"x": 45.499999999999986,"y": -93.69999999999999, "r": 48.111167892353286, "d": 50.0},{"x": 40.39999999999999,"y": -102.1, "r": 43.01116789235329, "d": 32.5},{"x": 27.650000000000002,"y": -97.89999999999998, "r": 30.261167892353306, "d": 50.0},{"x": 49.32499999999998,"y": -83.19999999999997, "r": 51.93616789235328, "d": 50.0},{"x": 34.025,"y": -95.79999999999998, "r": 36.6361678923533, "d": 50.0},{"x": 36.574999999999996,"y": -83.19999999999997, "r": 39.186167892353296, "d": 99.5},{"x": 31.475,"y": -95.79999999999998, "r": 34.0861678923533, "d": 99.5},{"x": 34.025,"y": -112.6, "r": 36.6361678923533, "d": 50.0},{"x": 25.1,"y": -97.89999999999998, "r": 27.711167892353306, "d": 50.0},{"x": 21.275,"y": -99.99999999999999, "r": 23.886167892353303, "d": 50.0},{"x": 39.12499999999999,"y": -116.8, "r": 41.73616789235329, "d": 69.0},{"x": 49.32499999999998,"y": -121.0, "r": 51.93616789235328, "d": 60.0},{"x": 22.55,"y": -102.1, "r": 25.161167892353305, "d": 50.0},{"x": 36.574999999999996,"y": -116.8, "r": 39.186167892353296, "d": 99.5},{"x": 31.475,"y": -83.19999999999997, "r": 34.0861678923533, "d": 98.5},{"x": 40.39999999999999,"y": -93.69999999999999, "r": 43.01116789235329, "d": 99.5},{"x": 46.774999999999984,"y": -95.79999999999998, "r": 49.386167892353285, "d": 50.0},{"x": 22.55,"y": -81.09999999999997, "r": 25.161167892353305, "d": 50.0},{"x": 35.3,"y": -110.5, "r": 37.9111678923533, "d": 50.0},{"x": 34.025,"y": -108.39999999999999, "r": 36.6361678923533, "d": 50.0},{"x": 25.1,"y": -106.29999999999998, "r": 27.711167892353306, "d": 12.5},{"x": 26.375,"y": -99.99999999999999, "r": 28.986167892353304, "d": 50.0},{"x": 26.375,"y": -95.79999999999998, "r": 28.986167892353304, "d": 50.0},{"x": 34.025,"y": -83.19999999999997, "r": 36.6361678923533, "d": 50.0},{"x": 46.774999999999984,"y": -99.99999999999999, "r": 49.386167892353285, "d": 50.0},{"x": 42.94999999999999,"y": -97.89999999999998, "r": 45.56116789235329, "d": 50.0},{"x": 49.32499999999998,"y": -87.39999999999998, "r": 51.93616789235328, "d": 50.0},{"x": 48.04999999999998,"y": -93.69999999999999, "r": 50.66116789235328, "d": 50.0},{"x": 23.825000000000003,"y": -108.39999999999999, "r": 26.436167892353307, "d": 12.5},{"x": 23.825000000000003,"y": -83.19999999999997, "r": 26.436167892353307, "d": 50.0},{"x": 49.32499999999998,"y": -112.6, "r": 51.93616789235328, "d": 50.0},{"x": 32.75,"y": -110.5, "r": 35.3611678923533, "d": 50.0},{"x": 25.1,"y": -81.09999999999997, "r": 27.711167892353306, "d": 50.0},{"x": 32.75,"y": -123.1, "r": 35.3611678923533, "d": 9.5},{"x": 48.04999999999998,"y": -110.5, "r": 50.66116789235328, "d": 50.0},{"x": 46.774999999999984,"y": -125.2, "r": 49.386167892353285, "d": 50.0},{"x": 49.32499999999998,"y": -99.99999999999999, "r": 51.93616789235328, "d": 53.5},{"x": 45.499999999999986,"y": -97.89999999999998, "r": 48.111167892353286, "d": 50.0},{"x": 34.025,"y": -125.2, "r": 36.6361678923533, "d": 9.5},{"x": 46.774999999999984,"y": -121.0, "r": 49.386167892353285, "d": 50.0},{"x": 35.3,"y": -97.89999999999998, "r": 37.9111678923533, "d": 50.0},{"x": 48.04999999999998,"y": -85.29999999999998, "r": 50.66116789235328, "d": 50.0},{"x": 21.275,"y": -104.19999999999999, "r": 23.886167892353303, "d": 50.0},{"x": 44.22499999999999,"y": -99.99999999999999, "r": 46.83616789235329, "d": 50.0},{"x": 28.925000000000004,"y": -104.19999999999999, "r": 31.53616789235331, "d": 55.5},{"x": 21.275,"y": -87.39999999999998, "r": 23.886167892353303, "d": 50.0},{"x": 22.55,"y": -85.29999999999998, "r": 25.161167892353305, "d": 50.0},{"x": 42.94999999999999,"y": -123.1, "r": 45.56116789235329, "d": 66.5},{"x": 49.32499999999998,"y": -108.39999999999999, "r": 51.93616789235328, "d": 50.0},{"x": 44.22499999999999,"y": -116.8, "r": 46.83616789235329, "d": 21.5}]}, {"centers": [{"x": 36.574999999999996,"y": -97.89999999999998, "r": 39.77301448450209, "d": 33.333332},{"x": 46.774999999999984,"y": -102.1, "r": 49.97301448450208, "d": 33.333332},{"x": 21.275,"y": -87.39999999999998, "r": 24.967749046999213, "d": 25.0},{"x": 23.825000000000003,"y": -87.39999999999998, "r": 27.517749046999217, "d": 25.0},{"x": 42.94999999999999,"y": -81.09999999999997, "r": 46.6427490469992, "d": 25.25},{"x": 44.22499999999999,"y": -121.0, "r": 47.9177490469992, "d": 35.75},{"x": 37.849999999999994,"y": -102.1, "r": 41.542749046999205, "d": 44.5},{"x": 21.275,"y": -99.99999999999999, "r": 24.967749046999213, "d": 25.0},{"x": 36.574999999999996,"y": -114.69999999999999, "r": 40.7036189464689, "d": 27.4},{"x": 49.32499999999998,"y": -123.1, "r": 52.52301448450208, "d": 40.0},{"x": 46.774999999999984,"y": -121.0, "r": 50.467749046999195, "d": 25.0},{"x": 44.22499999999999,"y": -97.89999999999998, "r": 48.35361894646889, "d": 20.0},{"x": 28.924999999999997,"y": -123.1, "r": 33.0536189464689, "d": 3.8},{"x": 45.499999999999986,"y": -110.5, "r": 49.1927490469992, "d": 25.0},{"x": 34.025,"y": -85.29999999999998, "r": 38.1536189464689, "d": 39.2},{"x": 49.32499999999998,"y": -85.29999999999998, "r": 52.52301448450208, "d": 33.333332},{"x": 27.65,"y": -106.29999999999998, "r": 31.342749046999213, "d": 9.0},{"x": 26.375,"y": -95.79999999999998, "r": 30.067749046999214, "d": 25.0},{"x": 49.32499999999998,"y": -99.99999999999999, "r": 51.93616789235328, "d": 53.5},{"x": 34.025,"y": -93.69999999999999, "r": 37.223014484502094, "d": 33.333332},{"x": 36.574999999999996,"y": -118.9, "r": 40.7036189464689, "d": 20.0}]}, {"centers": [{"x": 48.04999999999998,"y": -121.0, "r": 53.27233578470659, "d": 15.0},{"x": 23.825000000000003,"y": -87.39999999999998, "r": 27.517749046999217, "d": 25.0},{"x": 37.849999999999994,"y": -99.99999999999999, "r": 43.0723357847066, "d": 22.25},{"x": 26.375,"y": -104.19999999999999, "r": 31.597335784706612, "d": 12.625},{"x": 37.849999999999994,"y": -81.09999999999997, "r": 43.0723357847066, "d": 25.125},{"x": 37.849999999999994,"y": -104.19999999999999, "r": 43.0723357847066, "d": 22.25},{"x": 42.94999999999999,"y": -121.0, "r": 48.1723357847066, "d": 22.0},{"x": 44.22499999999999,"y": -97.89999999999998, "r": 48.35361894646889, "d": 20.0},{"x": 28.924999999999997,"y": -123.1, "r": 33.0536189464689, "d": 3.8},{"x": 45.499999999999986,"y": -110.5, "r": 49.1927490469992, "d": 25.0},{"x": 48.04999999999998,"y": -102.1, "r": 52.57267545664845, "d": 17.833334},{"x": 49.32499999999998,"y": -91.59999999999998, "r": 53.847675456648446, "d": 17.833334},{"x": 21.275,"y": -108.39999999999999, "r": 26.49733578470661, "d": 12.875},{"x": 36.574999999999996,"y": -85.29999999999998, "r": 41.46004781626534, "d": 42.285713}]}, {"centers": [{"x": 23.825000000000003,"y": -99.99999999999999, "r": 29.66374890796685, "d": 12.5},{"x": 21.275,"y": -110.5, "r": 26.814123570498822, "d": 11.444445},{"x": 48.04999999999998,"y": -121.0, "r": 53.27233578470659, "d": 15.0},{"x": 37.849999999999994,"y": -99.99999999999999, "r": 43.0723357847066, "d": 22.25},{"x": 28.925000000000004,"y": -108.39999999999999, "r": 34.76374890796685, "d": 11.1},{"x": 37.849999999999994,"y": -81.09999999999997, "r": 43.0723357847066, "d": 25.125},{"x": 37.849999999999994,"y": -104.19999999999999, "r": 43.0723357847066, "d": 22.25},{"x": 42.94999999999999,"y": -121.0, "r": 48.1723357847066, "d": 22.0},{"x": 44.22499999999999,"y": -97.89999999999998, "r": 48.35361894646889, "d": 20.0},{"x": 45.499999999999986,"y": -110.5, "r": 49.1927490469992, "d": 25.0},{"x": 26.375,"y": -108.39999999999999, "r": 32.213748907966846, "d": 10.1},{"x": 48.04999999999998,"y": -102.1, "r": 52.57267545664845, "d": 17.833334},{"x": 49.32499999999998,"y": -91.59999999999998, "r": 53.847675456648446, "d": 17.833334},{"x": 36.574999999999996,"y": -85.29999999999998, "r": 41.46004781626534, "d": 42.285713}]}, {"centers": [{"x": 36.574999999999996,"y": -87.39999999999998, "r": 43.483500874603514, "d": 21.142857},{"x": 21.275,"y": -110.5, "r": 26.814123570498822, "d": 11.444445},{"x": 48.04999999999998,"y": -121.0, "r": 53.27233578470659, "d": 15.0},{"x": 48.04999999999998,"y": -93.69999999999999, "r": 54.9585008746035, "d": 7.642857},{"x": 42.94999999999999,"y": -121.0, "r": 48.1723357847066, "d": 22.0},{"x": 23.825000000000003,"y": -104.19999999999999, "r": 30.221028969004195, "d": 10.416667},{"x": 45.499999999999986,"y": -110.5, "r": 49.1927490469992, "d": 25.0},{"x": 26.375,"y": -108.39999999999999, "r": 32.213748907966846, "d": 10.1},{"x": 37.849999999999994,"y": -102.1, "r": 44.24602896900418, "d": 14.833333}]}, {"centers": [{"x": 36.574999999999996,"y": -87.39999999999998, "r": 43.483500874603514, "d": 21.142857},{"x": 21.275,"y": -110.5, "r": 26.814123570498822, "d": 11.444445},{"x": 48.04999999999998,"y": -93.69999999999999, "r": 54.9585008746035, "d": 7.642857},{"x": 45.499999999999986,"y": -121.0, "r": 52.88549809399841, "d": 12.25},{"x": 23.825000000000003,"y": -104.19999999999999, "r": 30.221028969004195, "d": 10.416667},{"x": 45.499999999999986,"y": -110.5, "r": 49.1927490469992, "d": 25.0},{"x": 26.375,"y": -108.39999999999999, "r": 32.213748907966846, "d": 10.1},{"x": 37.849999999999994,"y": -102.1, "r": 44.24602896900418, "d": 14.833333}]}, {"centers": [{"x": 36.574999999999996,"y": -87.39999999999998, "r": 43.483500874603514, "d": 21.142857},{"x": 21.275,"y": -110.5, "r": 26.814123570498822, "d": 11.444445},{"x": 48.04999999999998,"y": -93.69999999999999, "r": 54.9585008746035, "d": 7.642857},{"x": 45.499999999999986,"y": -118.9, "r": 53.75723789293779, "d": 9.8},{"x": 23.825000000000003,"y": -104.19999999999999, "r": 30.221028969004195, "d": 10.416667},{"x": 26.375,"y": -108.39999999999999, "r": 32.213748907966846, "d": 10.1},{"x": 37.849999999999994,"y": -102.1, "r": 44.24602896900418, "d": 14.833333}]}, {"centers": [{"x": 36.574999999999996,"y": -87.39999999999998, "r": 43.483500874603514, "d": 21.142857},{"x": 21.275,"y": -110.5, "r": 26.814123570498822, "d": 11.444445},{"x": 48.04999999999998,"y": -93.69999999999999, "r": 54.9585008746035, "d": 7.642857},{"x": 45.499999999999986,"y": -118.9, "r": 53.75723789293779, "d": 9.8},{"x": 23.825000000000003,"y": -104.19999999999999, "r": 30.221028969004195, "d": 10.416667},{"x": 26.375,"y": -108.39999999999999, "r": 32.213748907966846, "d": 10.1},{"x": 37.849999999999994,"y": -102.1, "r": 44.24602896900418, "d": 14.833333}]}, {"centers": [{"x": 36.574999999999996,"y": -87.39999999999998, "r": 43.483500874603514, "d": 21.142857},{"x": 21.275,"y": -110.5, "r": 26.814123570498822, "d": 11.444445},{"x": 48.04999999999998,"y": -93.69999999999999, "r": 54.9585008746035, "d": 7.642857},{"x": 45.499999999999986,"y": -118.9, "r": 53.75723789293779, "d": 9.8},{"x": 23.825000000000003,"y": -104.19999999999999, "r": 30.221028969004195, "d": 10.416667},{"x": 26.375,"y": -108.39999999999999, "r": 32.213748907966846, "d": 10.1},{"x": 37.849999999999994,"y": -102.1, "r": 44.24602896900418, "d": 14.833333}]}, {"centers": [{"x": 36.574999999999996,"y": -87.39999999999998, "r": 43.483500874603514, "d": 21.142857},{"x": 21.275,"y": -110.5, "r": 26.814123570498822, "d": 11.444445},{"x": 48.04999999999998,"y": -93.69999999999999, "r": 54.9585008746035, "d": 7.642857},{"x": 45.499999999999986,"y": -118.9, "r": 53.75723789293779, "d": 9.8},{"x": 23.825000000000003,"y": -104.19999999999999, "r": 30.221028969004195, "d": 10.416667},{"x": 26.375,"y": -108.39999999999999, "r": 32.213748907966846, "d": 10.1},{"x": 37.849999999999994,"y": -102.1, "r": 44.24602896900418, "d": 14.833333}]}]}');

var rawData2 = JSON.parse('{"clusters": [{"centers": [{"x": 39.12499999999999,"y": -89.49999999999997, "r": 40.9713745234996, "d": 100.0},{"x": 36.574999999999996,"y": -93.69999999999999, "r": 38.4213745234996, "d": 24.0},{"x": 21.275,"y": -81.09999999999997, "r": 23.121374523499604, "d": 100.0},{"x": 36.574999999999996,"y": -114.69999999999999, "r": 38.4213745234996, "d": 100.0},{"x": 39.12499999999999,"y": -97.89999999999998, "r": 40.9713745234996, "d": 39.0},{"x": 41.67499999999999,"y": -89.49999999999997, "r": 43.521374523499595, "d": 100.0},{"x": 31.475,"y": -97.89999999999998, "r": 33.32137452349961, "d": 100.0},{"x": 49.32499999999998,"y": -97.89999999999998, "r": 51.17137452349959, "d": 38.0},{"x": 44.22499999999999,"y": -114.69999999999999, "r": 46.07137452349959, "d": 20.0},{"x": 39.12499999999999,"y": -93.69999999999999, "r": 40.9713745234996, "d": 58.0},{"x": 34.025,"y": -89.49999999999997, "r": 35.871374523499604, "d": 100.0},{"x": 21.275,"y": -106.29999999999998, "r": 23.121374523499604, "d": 24.0},{"x": 21.275,"y": -97.89999999999998, "r": 23.121374523499604, "d": 100.0},{"x": 23.825000000000003,"y": -81.09999999999997, "r": 25.67137452349961, "d": 98.0},{"x": 44.22499999999999,"y": -97.89999999999998, "r": 46.07137452349959, "d": 35.0},{"x": 41.67499999999999,"y": -110.5, "r": 43.521374523499595, "d": 28.0},{"x": 41.67499999999999,"y": -123.1, "r": 43.521374523499595, "d": 7.0},{"x": 34.025,"y": -110.5, "r": 35.871374523499604, "d": 100.0},{"x": 34.025,"y": -114.69999999999999, "r": 35.871374523499604, "d": 100.0},{"x": 46.774999999999984,"y": -97.89999999999998, "r": 48.62137452349959, "d": 11.0},{"x": 39.12499999999999,"y": -114.69999999999999, "r": 40.9713745234996, "d": 8.0},{"x": 31.475,"y": -93.69999999999999, "r": 33.32137452349961, "d": 21.0},{"x": 31.475,"y": -85.29999999999998, "r": 33.32137452349961, "d": 20.0},{"x": 36.574999999999996,"y": -110.5, "r": 38.4213745234996, "d": 10.0},{"x": 36.574999999999996,"y": -81.09999999999997, "r": 38.4213745234996, "d": 100.0},{"x": 44.22499999999999,"y": -123.1, "r": 46.07137452349959, "d": 83.0},{"x": 49.32499999999998,"y": -123.1, "r": 51.17137452349959, "d": 57.0},{"x": 39.12499999999999,"y": -123.1, "r": 40.9713745234996, "d": 99.0},{"x": 49.32499999999998,"y": -85.29999999999998, "r": 51.17137452349959, "d": 7.0},{"x": 31.475,"y": -81.09999999999997, "r": 33.32137452349961, "d": 90.0},{"x": 39.12499999999999,"y": -85.29999999999998, "r": 40.9713745234996, "d": 100.0},{"x": 34.025,"y": -123.1, "r": 35.871374523499604, "d": 23.0},{"x": 41.67499999999999,"y": -106.29999999999998, "r": 43.521374523499595, "d": 21.0},{"x": 46.774999999999984,"y": -93.69999999999999, "r": 48.62137452349959, "d": 8.0}]}, {"centers": [{"x": 36.574999999999996,"y": -83.19999999999997, "r": 39.186167892353296, "d": 50.0},{"x": 45.499999999999986,"y": -114.69999999999999, "r": 48.111167892353286, "d": 10.0},{"x": 42.94999999999999,"y": -89.49999999999997, "r": 45.56116789235329, "d": 50.0},{"x": 36.574999999999996,"y": -93.69999999999999, "r": 38.4213745234996, "d": 24.0},{"x": 22.55,"y": -81.09999999999997, "r": 25.161167892353305, "d": 99.0},{"x": 31.475,"y": -83.19999999999997, "r": 34.0861678923533, "d": 55.0},{"x": 31.475,"y": -95.79999999999998, "r": 34.0861678923533, "d": 60.5},{"x": 44.22499999999999,"y": -121.0, "r": 46.83616789235329, "d": 41.5},{"x": 37.849999999999994,"y": -81.09999999999997, "r": 40.461167892353295, "d": 50.0},{"x": 32.75,"y": -89.49999999999997, "r": 35.3611678923533, "d": 50.0},{"x": 49.32499999999998,"y": -125.2, "r": 51.93616789235328, "d": 28.5},{"x": 40.39999999999999,"y": -123.1, "r": 43.01116789235329, "d": 53.0},{"x": 22.55,"y": -97.89999999999998, "r": 25.161167892353305, "d": 50.0},{"x": 44.22499999999999,"y": -95.79999999999998, "r": 46.83616789235329, "d": 17.5},{"x": 39.12499999999999,"y": -83.19999999999997, "r": 41.73616789235329, "d": 50.0},{"x": 35.3,"y": -89.49999999999997, "r": 37.9111678923533, "d": 50.0},{"x": 48.04999999999998,"y": -97.89999999999998, "r": 50.66116789235328, "d": 24.5},{"x": 35.3,"y": -123.1, "r": 37.9111678923533, "d": 11.5},{"x": 34.025,"y": -91.59999999999998, "r": 36.6361678923533, "d": 50.0},{"x": 32.75,"y": -123.1, "r": 35.3611678923533, "d": 11.5},{"x": 37.849999999999994,"y": -97.89999999999998, "r": 40.461167892353295, "d": 19.5},{"x": 34.025,"y": -87.39999999999998, "r": 36.6361678923533, "d": 50.0},{"x": 21.275,"y": -99.99999999999999, "r": 23.886167892353303, "d": 50.0},{"x": 49.32499999999998,"y": -121.0, "r": 51.93616789235328, "d": 28.5},{"x": 41.67499999999999,"y": -108.39999999999999, "r": 44.28616789235329, "d": 24.5},{"x": 44.22499999999999,"y": -125.2, "r": 46.83616789235329, "d": 41.5},{"x": 44.22499999999999,"y": -99.99999999999999, "r": 46.83616789235329, "d": 17.5},{"x": 35.3,"y": -81.09999999999997, "r": 37.9111678923533, "d": 50.0},{"x": 37.849999999999994,"y": -85.29999999999998, "r": 40.461167892353295, "d": 50.0},{"x": 21.275,"y": -95.79999999999998, "r": 23.886167892353303, "d": 50.0},{"x": 35.3,"y": -110.5, "r": 37.9111678923533, "d": 55.0},{"x": 40.39999999999999,"y": -85.29999999999998, "r": 43.01116789235329, "d": 50.0},{"x": 41.67499999999999,"y": -87.39999999999998, "r": 44.28616789235329, "d": 50.0},{"x": 39.12499999999999,"y": -91.59999999999998, "r": 41.73616789235329, "d": 79.0},{"x": 41.67499999999999,"y": -91.59999999999998, "r": 44.28616789235329, "d": 50.0},{"x": 36.574999999999996,"y": -112.6, "r": 39.186167892353296, "d": 55.0},{"x": 34.025,"y": -125.2, "r": 36.6361678923533, "d": 11.5},{"x": 40.39999999999999,"y": -97.89999999999998, "r": 43.01116789235329, "d": 19.5},{"x": 45.499999999999986,"y": -123.1, "r": 48.111167892353286, "d": 41.5},{"x": 34.025,"y": -116.8, "r": 36.6361678923533, "d": 50.5},{"x": 39.12499999999999,"y": -99.99999999999999, "r": 41.73616789235329, "d": 19.5},{"x": 21.275,"y": -108.39999999999999, "r": 23.886167892353303, "d": 12.0},{"x": 22.55,"y": -106.29999999999998, "r": 25.161167892353305, "d": 12.0}]}, {"centers": [{"x": 36.574999999999996,"y": -110.5, "r": 40.7036189464689, "d": 22.0},{"x": 21.275,"y": -93.69999999999999, "r": 25.403618946468903, "d": 20.0},{"x": 41.67499999999999,"y": -110.5, "r": 45.803618946468895, "d": 9.8},{"x": 30.200000000000003,"y": -99.99999999999999, "r": 33.892749046999214, "d": 25.0},{"x": 44.22499999999999,"y": -102.1, "r": 48.35361894646889, "d": 7.0},{"x": 49.32499999999998,"y": -93.69999999999999, "r": 53.453618946468886, "d": 9.2},{"x": 25.1,"y": -81.09999999999997, "r": 28.792749046999216, "d": 49.5},{"x": 45.499999999999986,"y": -116.8, "r": 49.1927490469992, "d": 5.75},{"x": 49.32499999999998,"y": -118.9, "r": 53.453618946468886, "d": 11.4},{"x": 49.32499999999998,"y": -114.69999999999999, "r": 53.453618946468886, "d": 11.4},{"x": 21.275,"y": -114.69999999999999, "r": 25.403618946468903, "d": 4.8},{"x": 39.12499999999999,"y": -81.09999999999997, "r": 43.2536189464689, "d": 20.0},{"x": 39.12499999999999,"y": -121.0, "r": 42.817749046999204, "d": 26.75},{"x": 41.67499999999999,"y": -85.29999999999998, "r": 45.803618946468895, "d": 20.0},{"x": 39.12499999999999,"y": -97.89999999999998, "r": 43.2536189464689, "d": 39.4},{"x": 34.025,"y": -121.0, "r": 37.71774904699921, "d": 31.0},{"x": 31.474999999999998,"y": -93.69999999999999, "r": 35.6036189464689, "d": 9.0}]}, {"centers": [{"x": 41.67499999999999,"y": -114.69999999999999, "r": 46.56004781626533, "d": 8.0},{"x": 49.32499999999998,"y": -116.8, "r": 53.847675456648446, "d": 9.5},{"x": 37.849999999999994,"y": -121.0, "r": 43.0723357847066, "d": 25.875},{"x": 44.22499999999999,"y": -102.1, "r": 48.35361894646889, "d": 7.0},{"x": 49.32499999999998,"y": -93.69999999999999, "r": 53.453618946468886, "d": 9.2},{"x": 45.499999999999986,"y": -121.0, "r": 50.722335784706594, "d": 13.25},{"x": 32.75,"y": -121.0, "r": 37.97233578470661, "d": 15.5},{"x": 30.199999999999996,"y": -93.69999999999999, "r": 34.72267545664846, "d": 7.5},{"x": 41.67499999999999,"y": -85.29999999999998, "r": 45.803618946468895, "d": 20.0},{"x": 30.200000000000003,"y": -102.1, "r": 34.72267545664847, "d": 17.0},{"x": 21.275,"y": -116.8, "r": 25.797675456648463, "d": 4.0},{"x": 25.1,"y": -83.19999999999997, "r": 30.322335784706613, "d": 24.75},{"x": 39.12499999999999,"y": -97.89999999999998, "r": 43.2536189464689, "d": 39.4},{"x": 41.67499999999999,"y": -81.09999999999997, "r": 46.56004781626533, "d": 14.285714}]}, {"centers": [{"x": 30.200000000000003,"y": -97.89999999999998, "r": 36.03874890796685, "d": 12.3},{"x": 37.849999999999994,"y": -121.0, "r": 43.0723357847066, "d": 25.875},{"x": 45.499999999999986,"y": -121.0, "r": 50.722335784706594, "d": 13.25},{"x": 35.29999999999999,"y": -110.5, "r": 41.13874890796683, "d": 13.8},{"x": 49.32499999999998,"y": -106.29999999999998, "r": 55.448731516919416, "d": 9.363636},{"x": 32.75,"y": -121.0, "r": 37.97233578470661, "d": 15.5},{"x": 41.67499999999999,"y": -85.29999999999998, "r": 45.803618946468895, "d": 20.0},{"x": 21.275,"y": -116.8, "r": 25.797675456648463, "d": 4.0},{"x": 25.1,"y": -83.19999999999997, "r": 30.322335784706613, "d": 24.75},{"x": 39.12499999999999,"y": -97.89999999999998, "r": 43.2536189464689, "d": 39.4},{"x": 41.67499999999999,"y": -81.09999999999997, "r": 46.56004781626533, "d": 14.285714}]}, {"centers": [{"x": 45.499999999999986,"y": -114.69999999999999, "r": 52.408500874603504, "d": 7.571429},{"x": 37.849999999999994,"y": -121.0, "r": 43.0723357847066, "d": 25.875},{"x": 41.67499999999999,"y": -83.19999999999997, "r": 48.58350087460351, "d": 7.642857},{"x": 25.1,"y": -85.29999999999998, "r": 31.496028969004193, "d": 16.5},{"x": 31.475,"y": -121.0, "r": 37.871028969004186, "d": 10.333333},{"x": 21.275,"y": -116.8, "r": 25.797675456648463, "d": 4.0},{"x": 39.12499999999999,"y": -97.89999999999998, "r": 43.2536189464689, "d": 39.4}]}, {"centers": [{"x": 30.2,"y": -121.0, "r": 37.585498093998424, "d": 7.75},{"x": 45.499999999999986,"y": -114.69999999999999, "r": 52.408500874603504, "d": 7.571429},{"x": 37.849999999999994,"y": -121.0, "r": 43.0723357847066, "d": 25.875},{"x": 41.67499999999999,"y": -83.19999999999997, "r": 48.58350087460351, "d": 7.642857},{"x": 25.1,"y": -85.29999999999998, "r": 31.496028969004193, "d": 16.5},{"x": 21.275,"y": -116.8, "r": 25.797675456648463, "d": 4.0},{"x": 39.12499999999999,"y": -97.89999999999998, "r": 43.2536189464689, "d": 39.4}]}, {"centers": [{"x": 28.924999999999997,"y": -121.0, "r": 37.182237892937806, "d": 6.2},{"x": 45.499999999999986,"y": -114.69999999999999, "r": 52.408500874603504, "d": 7.571429},{"x": 41.67499999999999,"y": -83.19999999999997, "r": 48.58350087460351, "d": 7.642857},{"x": 26.375,"y": -104.19999999999999, "r": 28.986167892353304, "d": 1.0},{"x": 25.1,"y": -85.29999999999998, "r": 31.496028969004193, "d": 16.5},{"x": 37.849999999999994,"y": -108.39999999999999, "r": 46.107237892937796, "d": 16.9},{"x": 21.275,"y": -116.8, "r": 25.797675456648463, "d": 4.0}]}, {"centers": [{"x": 28.924999999999997,"y": -121.0, "r": 37.182237892937806, "d": 6.2},{"x": 45.499999999999986,"y": -114.69999999999999, "r": 52.408500874603504, "d": 7.571429},{"x": 41.67499999999999,"y": -83.19999999999997, "r": 48.58350087460351, "d": 7.642857},{"x": 26.375,"y": -104.19999999999999, "r": 28.986167892353304, "d": 1.0},{"x": 25.1,"y": -85.29999999999998, "r": 31.496028969004193, "d": 16.5},{"x": 37.849999999999994,"y": -108.39999999999999, "r": 46.107237892937796, "d": 16.9},{"x": 21.275,"y": -116.8, "r": 25.797675456648463, "d": 4.0}]}, {"centers": [{"x": 28.924999999999997,"y": -121.0, "r": 37.182237892937806, "d": 6.2},{"x": 25.1,"y": -91.59999999999998, "r": 34.14535091329693, "d": 8.25},{"x": 45.499999999999986,"y": -114.69999999999999, "r": 52.408500874603504, "d": 7.571429},{"x": 41.67499999999999,"y": -83.19999999999997, "r": 48.58350087460351, "d": 7.642857},{"x": 37.849999999999994,"y": -108.39999999999999, "r": 46.107237892937796, "d": 16.9},{"x": 21.275,"y": -116.8, "r": 25.797675456648463, "d": 4.0}]}, {"centers": [{"x": 28.924999999999997,"y": -121.0, "r": 37.182237892937806, "d": 6.2},{"x": 25.1,"y": -91.59999999999998, "r": 34.14535091329693, "d": 8.25},{"x": 45.499999999999986,"y": -114.69999999999999, "r": 52.408500874603504, "d": 7.571429},{"x": 41.67499999999999,"y": -83.19999999999997, "r": 48.58350087460351, "d": 7.642857},{"x": 37.849999999999994,"y": -108.39999999999999, "r": 46.107237892937796, "d": 16.9},{"x": 21.275,"y": -116.8, "r": 25.797675456648463, "d": 4.0}]}]}');

var rawData3 = JSON.parse('{"clusters": [{"centers": [{"x": 39.12499999999999,"y": -106.29999999999998, "r": 40.9713745234996, "d": 100.0},{"x": 26.375,"y": -114.69999999999999, "r": 28.221374523499605, "d": 100.0},{"x": 46.774999999999984,"y": -123.1, "r": 48.62137452349959, "d": 100.0},{"x": 41.67499999999999,"y": -106.29999999999998, "r": 43.521374523499595, "d": 100.0},{"x": 21.275,"y": -110.5, "r": 23.121374523499604, "d": 100.0},{"x": 21.275,"y": -102.1, "r": 23.121374523499604, "d": 100.0},{"x": 26.375,"y": -81.09999999999997, "r": 28.221374523499605, "d": 100.0},{"x": 36.574999999999996,"y": -102.1, "r": 38.4213745234996, "d": 100.0},{"x": 23.825000000000003,"y": -110.5, "r": 25.67137452349961, "d": 100.0},{"x": 39.12499999999999,"y": -123.1, "r": 40.9713745234996, "d": 100.0},{"x": 28.925000000000004,"y": -93.69999999999999, "r": 30.77137452349961, "d": 100.0},{"x": 44.22499999999999,"y": -114.69999999999999, "r": 46.07137452349959, "d": 100.0},{"x": 34.025,"y": -118.9, "r": 35.871374523499604, "d": 100.0},{"x": 21.275,"y": -106.29999999999998, "r": 23.121374523499604, "d": 101.0},{"x": 39.12499999999999,"y": -81.09999999999997, "r": 40.9713745234996, "d": 100.0},{"x": 26.375,"y": -93.69999999999999, "r": 28.221374523499605, "d": 7.0},{"x": 36.574999999999996,"y": -110.5, "r": 38.4213745234996, "d": 100.0},{"x": 46.774999999999984,"y": -106.29999999999998, "r": 48.62137452349959, "d": 19.0},{"x": 41.67499999999999,"y": -81.09999999999997, "r": 43.521374523499595, "d": 100.0},{"x": 34.025,"y": -97.89999999999998, "r": 35.871374523499604, "d": 102.0},{"x": 49.32499999999998,"y": -110.5, "r": 51.17137452349959, "d": 100.0},{"x": 39.12499999999999,"y": -93.69999999999999, "r": 40.9713745234996, "d": 100.0},{"x": 44.22499999999999,"y": -89.49999999999997, "r": 46.07137452349959, "d": 101.0},{"x": 46.774999999999984,"y": -85.29999999999998, "r": 48.62137452349959, "d": 100.0},{"x": 46.774999999999984,"y": -114.69999999999999, "r": 48.62137452349959, "d": 100.0},{"x": 49.32499999999998,"y": -127.30000000000001, "r": 51.17137452349959, "d": 99.0},{"x": 28.925000000000004,"y": -89.49999999999997, "r": 30.77137452349961, "d": 100.0},{"x": 31.475,"y": -106.29999999999998, "r": 33.32137452349961, "d": 100.0},{"x": 31.475,"y": -85.29999999999998, "r": 33.32137452349961, "d": 100.0},{"x": 23.825000000000003,"y": -81.09999999999997, "r": 25.67137452349961, "d": 100.0},{"x": 34.025,"y": -89.49999999999997, "r": 35.871374523499604, "d": 101.0},{"x": 41.67499999999999,"y": -102.1, "r": 43.521374523499595, "d": 100.0},{"x": 41.67499999999999,"y": -123.1, "r": 43.521374523499595, "d": 100.0},{"x": 39.12499999999999,"y": -102.1, "r": 40.9713745234996, "d": 100.0},{"x": 49.32499999999998,"y": -93.69999999999999, "r": 51.17137452349959, "d": 100.0},{"x": 26.375,"y": -106.29999999999998, "r": 28.221374523499605, "d": 99.0},{"x": 34.025,"y": -81.09999999999997, "r": 35.871374523499604, "d": 100.0},{"x": 34.025,"y": -102.1, "r": 35.871374523499604, "d": 100.0},{"x": 31.475,"y": -110.5, "r": 33.32137452349961, "d": 100.0},{"x": 36.574999999999996,"y": -93.69999999999999, "r": 38.4213745234996, "d": 102.0},{"x": 44.22499999999999,"y": -106.29999999999998, "r": 46.07137452349959, "d": 100.0},{"x": 21.275,"y": -97.89999999999998, "r": 23.121374523499604, "d": 108.0},{"x": 46.774999999999984,"y": -93.69999999999999, "r": 48.62137452349959, "d": 101.0},{"x": 28.925000000000004,"y": -106.29999999999998, "r": 30.77137452349961, "d": 97.0},{"x": 44.22499999999999,"y": -81.09999999999997, "r": 46.07137452349959, "d": 132.0},{"x": 31.475,"y": -81.09999999999997, "r": 33.32137452349961, "d": 97.0},{"x": 34.025,"y": -85.29999999999998, "r": 35.871374523499604, "d": 100.0}]}, {"centers": [{"x": 21.275,"y": -99.99999999999999, "r": 23.886167892353303, "d": 104.0},{"x": 42.94999999999999,"y": -123.1, "r": 45.56116789235329, "d": 50.0},{"x": 32.75,"y": -118.9, "r": 35.3611678923533, "d": 50.0},{"x": 46.774999999999984,"y": -116.8, "r": 49.386167892353285, "d": 50.0},{"x": 39.12499999999999,"y": -121.0, "r": 41.73616789235329, "d": 50.0},{"x": 45.499999999999986,"y": -106.29999999999998, "r": 48.111167892353286, "d": 59.5},{"x": 44.22499999999999,"y": -91.59999999999998, "r": 46.83616789235329, "d": 50.5},{"x": 30.200000000000003,"y": -106.29999999999998, "r": 32.81116789235331, "d": 98.5},{"x": 41.67499999999999,"y": -104.19999999999999, "r": 44.28616789235329, "d": 50.0},{"x": 40.39999999999999,"y": -106.29999999999998, "r": 43.01116789235329, "d": 50.0},{"x": 25.1,"y": -114.69999999999999, "r": 27.711167892353306, "d": 50.0},{"x": 48.04999999999998,"y": -114.69999999999999, "r": 50.66116789235328, "d": 50.0},{"x": 45.499999999999986,"y": -114.69999999999999, "r": 48.111167892353286, "d": 50.0},{"x": 25.1,"y": -110.5, "r": 27.711167892353306, "d": 50.0},{"x": 31.475,"y": -83.19999999999997, "r": 34.0861678923533, "d": 98.5},{"x": 36.574999999999996,"y": -104.19999999999999, "r": 39.186167892353296, "d": 50.0},{"x": 27.650000000000002,"y": -89.49999999999997, "r": 30.261167892353306, "d": 50.0},{"x": 39.12499999999999,"y": -104.19999999999999, "r": 41.73616789235329, "d": 50.0},{"x": 21.275,"y": -108.39999999999999, "r": 23.886167892353303, "d": 100.5},{"x": 34.025,"y": -87.39999999999998, "r": 36.6361678923533, "d": 100.5},{"x": 39.12499999999999,"y": -125.2, "r": 41.73616789235329, "d": 50.0},{"x": 44.22499999999999,"y": -112.6, "r": 46.83616789235329, "d": 50.0},{"x": 39.12499999999999,"y": -99.99999999999999, "r": 41.73616789235329, "d": 50.0},{"x": 25.1,"y": -106.29999999999998, "r": 27.711167892353306, "d": 49.5},{"x": 26.375,"y": -112.6, "r": 28.986167892353304, "d": 50.0},{"x": 35.3,"y": -110.5, "r": 37.9111678923533, "d": 50.0},{"x": 40.39999999999999,"y": -123.1, "r": 43.01116789235329, "d": 50.0},{"x": 26.375,"y": -83.19999999999997, "r": 28.986167892353304, "d": 50.0},{"x": 42.94999999999999,"y": -102.1, "r": 45.56116789235329, "d": 50.0},{"x": 30.200000000000003,"y": -110.5, "r": 32.81116789235331, "d": 50.0},{"x": 37.849999999999994,"y": -102.1, "r": 40.461167892353295, "d": 50.0},{"x": 45.499999999999986,"y": -89.49999999999997, "r": 48.111167892353286, "d": 50.5},{"x": 22.55,"y": -81.09999999999997, "r": 25.161167892353305, "d": 50.0},{"x": 27.650000000000002,"y": -114.69999999999999, "r": 30.261167892353306, "d": 50.0},{"x": 34.025,"y": -116.8, "r": 36.6361678923533, "d": 50.0},{"x": 44.22499999999999,"y": -116.8, "r": 46.83616789235329, "d": 50.0},{"x": 41.67499999999999,"y": -108.39999999999999, "r": 44.28616789235329, "d": 50.0},{"x": 39.12499999999999,"y": -108.39999999999999, "r": 41.73616789235329, "d": 50.0},{"x": 41.67499999999999,"y": -99.99999999999999, "r": 44.28616789235329, "d": 50.0},{"x": 46.774999999999984,"y": -112.6, "r": 49.386167892353285, "d": 50.0},{"x": 34.025,"y": -121.0, "r": 36.6361678923533, "d": 50.0},{"x": 36.574999999999996,"y": -112.6, "r": 39.186167892353296, "d": 50.0},{"x": 48.04999999999998,"y": -123.1, "r": 50.66116789235328, "d": 50.0},{"x": 49.32499999999998,"y": -127.30000000000001, "r": 51.17137452349959, "d": 99.0},{"x": 28.925000000000004,"y": -87.39999999999998, "r": 31.53616789235331, "d": 50.0},{"x": 37.849999999999994,"y": -123.1, "r": 40.461167892353295, "d": 50.0},{"x": 31.475,"y": -112.6, "r": 34.0861678923533, "d": 50.0},{"x": 23.825000000000003,"y": -83.19999999999997, "r": 26.436167892353307, "d": 50.0},{"x": 49.32499999999998,"y": -112.6, "r": 51.93616789235328, "d": 50.0},{"x": 34.025,"y": -99.99999999999999, "r": 36.6361678923533, "d": 101.0},{"x": 42.94999999999999,"y": -114.69999999999999, "r": 45.56116789235329, "d": 50.0},{"x": 48.04999999999998,"y": -85.29999999999998, "r": 50.66116789235328, "d": 50.0},{"x": 36.574999999999996,"y": -108.39999999999999, "r": 39.186167892353296, "d": 50.0},{"x": 23.825000000000003,"y": -112.6, "r": 26.436167892353307, "d": 50.0},{"x": 27.650000000000002,"y": -93.69999999999999, "r": 30.261167892353306, "d": 53.5},{"x": 48.04999999999998,"y": -110.5, "r": 50.66116789235328, "d": 50.0},{"x": 46.774999999999984,"y": -125.2, "r": 49.386167892353285, "d": 50.0},{"x": 26.375,"y": -104.19999999999999, "r": 28.986167892353304, "d": 49.5},{"x": 25.1,"y": -81.09999999999997, "r": 27.711167892353306, "d": 50.0},{"x": 37.849999999999994,"y": -81.09999999999997, "r": 40.461167892353295, "d": 50.0},{"x": 48.04999999999998,"y": -93.69999999999999, "r": 50.66116789235328, "d": 100.5},{"x": 45.499999999999986,"y": -123.1, "r": 48.111167892353286, "d": 50.0},{"x": 37.849999999999994,"y": -106.29999999999998, "r": 40.461167892353295, "d": 50.0},{"x": 35.3,"y": -118.9, "r": 37.9111678923533, "d": 50.0},{"x": 46.774999999999984,"y": -121.0, "r": 49.386167892353285, "d": 50.0},{"x": 41.67499999999999,"y": -125.2, "r": 44.28616789235329, "d": 50.0},{"x": 40.39999999999999,"y": -102.1, "r": 43.01116789235329, "d": 50.0},{"x": 42.94999999999999,"y": -89.49999999999997, "r": 45.56116789235329, "d": 50.5},{"x": 41.67499999999999,"y": -121.0, "r": 44.28616789235329, "d": 50.0},{"x": 42.94999999999999,"y": -81.09999999999997, "r": 45.56116789235329, "d": 116.0},{"x": 37.849999999999994,"y": -110.5, "r": 40.461167892353295, "d": 50.0},{"x": 37.849999999999994,"y": -93.69999999999999, "r": 40.461167892353295, "d": 101.0},{"x": 27.650000000000002,"y": -81.09999999999997, "r": 30.261167892353306, "d": 50.0},{"x": 32.75,"y": -110.5, "r": 35.3611678923533, "d": 50.0},{"x": 49.32499999999998,"y": -108.39999999999999, "r": 51.93616789235328, "d": 50.0},{"x": 39.12499999999999,"y": -83.19999999999997, "r": 41.73616789235329, "d": 50.0},{"x": 32.75,"y": -81.09999999999997, "r": 35.3611678923533, "d": 98.5},{"x": 26.375,"y": -116.8, "r": 28.986167892353304, "d": 50.0}]}, {"centers": [{"x": 45.499999999999986,"y": -106.29999999999998, "r": 48.111167892353286, "d": 59.5},{"x": 49.32499999999998,"y": -110.5, "r": 53.453618946468886, "d": 20.0},{"x": 48.04999999999998,"y": -91.59999999999998, "r": 51.742749046999194, "d": 50.25},{"x": 48.04999999999998,"y": -125.2, "r": 51.742749046999194, "d": 49.75},{"x": 31.475,"y": -118.9, "r": 35.603618946468906, "d": 20.0},{"x": 28.925000000000004,"y": -93.69999999999999, "r": 33.05361894646891, "d": 20.2},{"x": 21.275,"y": -102.1, "r": 25.403618946468903, "d": 61.8},{"x": 44.22499999999999,"y": -91.59999999999998, "r": 47.9177490469992, "d": 25.25},{"x": 40.39999999999999,"y": -123.1, "r": 44.0927490469992, "d": 25.0},{"x": 34.025,"y": -121.0, "r": 37.71774904699921, "d": 25.0},{"x": 26.375,"y": -106.29999999999998, "r": 30.503618946468904, "d": 39.8},{"x": 39.12499999999999,"y": -121.0, "r": 42.817749046999204, "d": 25.0},{"x": 41.67499999999999,"y": -104.19999999999999, "r": 45.3677490469992, "d": 25.0},{"x": 34.025,"y": -93.69999999999999, "r": 38.1536189464689, "d": 60.6},{"x": 31.475,"y": -89.49999999999997, "r": 35.603618946468906, "d": 39.4},{"x": 36.574999999999996,"y": -97.89999999999998, "r": 40.7036189464689, "d": 40.4},{"x": 40.39999999999999,"y": -83.19999999999997, "r": 44.0927490469992, "d": 25.0},{"x": 36.574999999999996,"y": -110.5, "r": 39.77301448450209, "d": 33.333332},{"x": 48.04999999999998,"y": -85.29999999999998, "r": 50.66116789235328, "d": 50.0},{"x": 48.04999999999998,"y": -95.79999999999998, "r": 51.742749046999194, "d": 50.25},{"x": 23.825000000000003,"y": -118.9, "r": 27.953618946468907, "d": 20.0},{"x": 25.1,"y": -81.09999999999997, "r": 28.792749046999216, "d": 25.0},{"x": 21.275,"y": -106.29999999999998, "r": 25.403618946468903, "d": 61.8},{"x": 42.94999999999999,"y": -114.69999999999999, "r": 46.6427490469992, "d": 25.0},{"x": 42.94999999999999,"y": -102.1, "r": 46.6427490469992, "d": 25.0}]}, {"centers": [{"x": 37.849999999999994,"y": -121.0, "r": 43.0723357847066, "d": 12.5},{"x": 36.574999999999996,"y": -95.79999999999998, "r": 41.09767545664846, "d": 33.666668},{"x": 49.32499999999998,"y": -110.5, "r": 53.453618946468886, "d": 20.0},{"x": 21.275,"y": -99.99999999999999, "r": 26.49733578470661, "d": 38.625},{"x": 31.475,"y": -118.9, "r": 35.603618946468906, "d": 20.0},{"x": 35.3,"y": -121.0, "r": 40.522335784706605, "d": 12.5},{"x": 28.925000000000004,"y": -93.69999999999999, "r": 33.05361894646891, "d": 20.2},{"x": 44.22499999999999,"y": -91.59999999999998, "r": 47.9177490469992, "d": 25.25},{"x": 23.825000000000003,"y": -112.6, "r": 29.047335784706615, "d": 12.5},{"x": 42.94999999999999,"y": -104.19999999999999, "r": 48.1723357847066, "d": 14.875},{"x": 21.275,"y": -112.6, "r": 26.49733578470661, "d": 38.625},{"x": 48.04999999999998,"y": -91.59999999999998, "r": 53.27233578470659, "d": 25.125},{"x": 34.025,"y": -93.69999999999999, "r": 38.1536189464689, "d": 60.6},{"x": 31.475,"y": -89.49999999999997, "r": 35.603618946468906, "d": 39.4},{"x": 40.39999999999999,"y": -83.19999999999997, "r": 44.0927490469992, "d": 25.0},{"x": 36.574999999999996,"y": -110.5, "r": 39.77301448450209, "d": 33.333332},{"x": 26.375,"y": -112.6, "r": 31.597335784706612, "d": 24.875},{"x": 21.275,"y": -108.39999999999999, "r": 26.49733578470661, "d": 38.625},{"x": 46.774999999999984,"y": -125.2, "r": 51.29767545664845, "d": 33.166668},{"x": 21.275,"y": -104.19999999999999, "r": 26.49733578470661, "d": 38.625},{"x": 25.1,"y": -81.09999999999997, "r": 28.792749046999216, "d": 25.0}]}, {"centers": [{"x": 37.849999999999994,"y": -121.0, "r": 43.0723357847066, "d": 12.5},{"x": 36.574999999999996,"y": -95.79999999999998, "r": 41.09767545664846, "d": 33.666668},{"x": 28.925000000000004,"y": -106.29999999999998, "r": 35.04873151691944, "d": 18.0},{"x": 49.32499999999998,"y": -110.5, "r": 53.453618946468886, "d": 20.0},{"x": 31.475,"y": -118.9, "r": 35.603618946468906, "d": 20.0},{"x": 35.3,"y": -121.0, "r": 40.522335784706605, "d": 12.5},{"x": 44.22499999999999,"y": -91.59999999999998, "r": 47.9177490469992, "d": 25.25},{"x": 23.825000000000003,"y": -112.6, "r": 29.047335784706615, "d": 12.5},{"x": 21.275,"y": -106.29999999999998, "r": 27.398731516919433, "d": 28.09091},{"x": 42.94999999999999,"y": -104.19999999999999, "r": 48.1723357847066, "d": 14.875},{"x": 48.04999999999998,"y": -91.59999999999998, "r": 53.27233578470659, "d": 25.125},{"x": 34.025,"y": -93.69999999999999, "r": 38.1536189464689, "d": 60.6},{"x": 31.475,"y": -89.49999999999997, "r": 35.603618946468906, "d": 39.4},{"x": 40.39999999999999,"y": -83.19999999999997, "r": 44.0927490469992, "d": 25.0},{"x": 36.574999999999996,"y": -110.5, "r": 39.77301448450209, "d": 33.333332},{"x": 26.375,"y": -112.6, "r": 31.597335784706612, "d": 24.875},{"x": 46.774999999999984,"y": -125.2, "r": 51.29767545664845, "d": 33.166668},{"x": 25.1,"y": -81.09999999999997, "r": 28.792749046999216, "d": 25.0}]}, {"centers": [{"x": 36.574999999999996,"y": -95.79999999999998, "r": 41.09767545664846, "d": 33.666668},{"x": 28.925000000000004,"y": -106.29999999999998, "r": 35.04873151691944, "d": 18.0},{"x": 49.32499999999998,"y": -110.5, "r": 53.453618946468886, "d": 20.0},{"x": 31.475,"y": -118.9, "r": 35.603618946468906, "d": 20.0},{"x": 36.574999999999996,"y": -121.0, "r": 42.97102896900418, "d": 8.333333},{"x": 23.825000000000003,"y": -112.6, "r": 29.047335784706615, "d": 12.5},{"x": 21.275,"y": -106.29999999999998, "r": 27.398731516919433, "d": 28.09091},{"x": 42.94999999999999,"y": -104.19999999999999, "r": 48.1723357847066, "d": 14.875},{"x": 40.39999999999999,"y": -83.19999999999997, "r": 44.0927490469992, "d": 25.0},{"x": 46.774999999999984,"y": -91.59999999999998, "r": 53.17102896900417, "d": 16.75},{"x": 32.75,"y": -91.59999999999998, "r": 39.146028969004185, "d": 33.333332},{"x": 36.574999999999996,"y": -110.5, "r": 39.77301448450209, "d": 33.333332},{"x": 26.375,"y": -112.6, "r": 31.597335784706612, "d": 24.875},{"x": 46.774999999999984,"y": -125.2, "r": 51.29767545664845, "d": 33.166668},{"x": 25.1,"y": -81.09999999999997, "r": 28.792749046999216, "d": 25.0}]}, {"centers": [{"x": 36.574999999999996,"y": -95.79999999999998, "r": 41.09767545664846, "d": 33.666668},{"x": 36.574999999999996,"y": -118.9, "r": 43.72597778037562, "d": 6.6666665},{"x": 28.925000000000004,"y": -106.29999999999998, "r": 35.04873151691944, "d": 18.0},{"x": 49.32499999999998,"y": -110.5, "r": 53.453618946468886, "d": 20.0},{"x": 31.475,"y": -118.9, "r": 35.603618946468906, "d": 20.0},{"x": 25.1,"y": -112.6, "r": 32.48549809399843, "d": 12.4375},{"x": 21.275,"y": -106.29999999999998, "r": 27.398731516919433, "d": 28.09091},{"x": 42.94999999999999,"y": -104.19999999999999, "r": 48.1723357847066, "d": 14.875},{"x": 40.39999999999999,"y": -83.19999999999997, "r": 44.0927490469992, "d": 25.0},{"x": 46.774999999999984,"y": -91.59999999999998, "r": 53.17102896900417, "d": 16.75},{"x": 32.75,"y": -91.59999999999998, "r": 39.146028969004185, "d": 33.333332},{"x": 46.774999999999984,"y": -125.2, "r": 51.29767545664845, "d": 33.166668},{"x": 25.1,"y": -81.09999999999997, "r": 28.792749046999216, "d": 25.0}]}, {"centers": [{"x": 36.574999999999996,"y": -118.9, "r": 43.72597778037562, "d": 6.6666665},{"x": 49.32499999999998,"y": -110.5, "r": 53.453618946468886, "d": 20.0},{"x": 31.475,"y": -118.9, "r": 35.603618946468906, "d": 20.0},{"x": 25.1,"y": -112.6, "r": 32.48549809399843, "d": 12.4375},{"x": 42.94999999999999,"y": -104.19999999999999, "r": 48.1723357847066, "d": 14.875},{"x": 46.774999999999984,"y": -91.59999999999998, "r": 53.17102896900417, "d": 16.75},{"x": 31.474999999999994,"y": -83.19999999999997, "r": 39.30850367705991, "d": 10.944445},{"x": 46.774999999999984,"y": -125.2, "r": 51.29767545664845, "d": 33.166668}]}, {"centers": [{"x": 36.574999999999996,"y": -118.9, "r": 43.72597778037562, "d": 6.6666665},{"x": 31.475,"y": -118.9, "r": 35.603618946468906, "d": 20.0},{"x": 25.1,"y": -112.6, "r": 32.48549809399843, "d": 12.4375},{"x": 46.774999999999984,"y": -91.59999999999998, "r": 53.17102896900417, "d": 16.75},{"x": 31.474999999999994,"y": -83.19999999999997, "r": 39.30850367705991, "d": 10.944445},{"x": 46.774999999999984,"y": -114.69999999999999, "r": 55.23615101517495, "d": 10.380953}]}, {"centers": [{"x": 36.574999999999996,"y": -118.9, "r": 43.72597778037562, "d": 6.6666665},{"x": 31.475,"y": -118.9, "r": 35.603618946468906, "d": 20.0},{"x": 25.1,"y": -112.6, "r": 32.48549809399843, "d": 12.4375},{"x": 46.774999999999984,"y": -91.59999999999998, "r": 53.17102896900417, "d": 16.75},{"x": 31.474999999999994,"y": -83.19999999999997, "r": 39.30850367705991, "d": 10.944445},{"x": 46.774999999999984,"y": -114.69999999999999, "r": 55.23615101517495, "d": 10.380953}]}, {"centers": [{"x": 36.574999999999996,"y": -118.9, "r": 43.72597778037562, "d": 6.6666665},{"x": 31.475,"y": -118.9, "r": 35.603618946468906, "d": 20.0},{"x": 25.1,"y": -112.6, "r": 32.48549809399843, "d": 12.4375},{"x": 46.774999999999984,"y": -91.59999999999998, "r": 53.17102896900417, "d": 16.75},{"x": 31.474999999999994,"y": -83.19999999999997, "r": 39.30850367705991, "d": 10.944445},{"x": 46.774999999999984,"y": -114.69999999999999, "r": 55.23615101517495, "d": 10.380953}]}]}');

  //Graphical environnement
var graph = document.getElementById("map").getElementsByTagName("svg")[0].appendChild(po.svg("g"));


function cluster(view_center, zoom, data) {
  rawData1 = JSON.parse(data); update2();
  if(view_center) map.center(view_center);
  if(zoom) map.zoom(zoom);
}
//Translating function 
  /*@brief: Transforms the raw data in pixels
    @expects: [{x, y, r}, {x,y,r}...]
  */
function generateData(centers){
  var res = [];
  for(var i = 0; i < centers.length; i++) {
    var e = centers[i];
    var bitch = JSON.parse('{"x": '+e.r+', "y": '+e.y+'}');
    var border = geoToPx(bitch);
    var toPix = geoToPx(e);
    var diff = border.y - toPix.y;
    var nR = Math.abs(border.y - toPix.y);
    /*console.log("DA GEO "+JSON.stringify(toPix));
    console.log("DA Border "+JSON.stringify(border));
    console.log("DA e"+JSON.stringify(e));
    console.log("DA nR "+ nR);*/
    res.push(JSON.parse('{"x":'+toPix.x+', "y":'+toPix.y+', "r": '+nR+', "d": '+e.d+'}'));
    
  }
  return res;
}

//Functions to draw
  //Expects input of the form {"x": _, "y": _, "r": _}
var colors = ["", "LightCoral", "RoyalBlue", "Purple"]
function drawCircle(entry, colorID) {
  var point = graph.appendChild(po.svg("circle"));
  point.setAttribute('style', 'fill:'+ colors[colorID] +"; "+point.getAttribute("fill"));
  point.setAttribute('style', 'opacity:'+entry.d / 120+"; "+point.getAttribute("style"));
  point.setAttribute("cx", entry.x);
  point.setAttribute("cy", entry.y);
  point.setAttribute("r", entry.r);
}

  //Goes through the list of centers at one level
function drawCenters(clusts, colorID){
  for(var i = 0; i < clusts.length; i++) {
    drawCircle(clusts[i], colorID);
  }
}


//Helper functions
  //Translates pixels {"x": _, "y":_, "r":_ } into geolocation 
  //using only the x and y attribute; Returns {"lat":_, "lon":_}
function pxToGeo(pt){
  return map.pointLocation(JSON.parse('{"x":'+ pt.x+', "y": '+pt.y+'}'));
}

  //Translates geolocation {"lat": _, "lon":_} into pixel {"x":_, "y": _}
function geoToPx(pt){
  //Trouble parsing here
  return map.locationPoint(JSON.parse('{ "lat":'+pt.x+', "lon": '+pt.y+'}'));
}

function update2() {
  //custers: 0 (more details) ->  9
  //zoom level:  3 (far zoom) -> 10
  while(graph.firstChild){
    graph.removeChild(graph.firstChild);
  }
 
  drawCenters(generateData(rawData1.clusters[0].centers), 1);
  console.log(Math.floor(map.zoom()));
  drawCenters(generateData(rawData2.clusters[9].centers), 2);
  drawCenters(generateData(rawData3.clusters[10 - (Math.floor(map.zoom()) - 3)].centers), 3);

}

update2();
  //Tests drawCenters
//drawCenters(generateData(rawData1.clusters[0].centers), 1);
/*drawCenters(generateDate(rawData2.clusters[0].centers), 2);
drawCenters(generateDate(rawData3.clusters[0].centers), 3);  */
  //Tests
//var res = geoToPx(JSON.parse('{"x": 37.787, "y": -122.228}'));
//var res2 = geoToPx(JSON.parse('{"x": 37.787, "y": -132.228}'));
//var res2 = pxToGeo(JSON.parse('{"x": 758.9, "y": 160}'));



//drawCircle(JSON.parse('{"x": 0, "y": 300, "r": 30}'))

